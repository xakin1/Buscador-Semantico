<!DOCTYPE html>
<html lang="en">

<body class="sidebar-dark">

	<div class="main-wrapper">

		<!-- partial:partials/_sidebar.php -->


<nav class="sidebar">
	<div class="sidebar-header bg-white border-0">
        <a [routerLink]="['/index']" class="sidebar-brand">
         <img id="logo" src='../../../../assets/images/logo.png'/>
        </a>
        <div class="sidebar-toggler not-active">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
      <div class="sidebar-body ps ps--active-y bg-light border-0">
        <ul class="nav" id="barraNavegacion">



		<li class="nav-item">
			<a [routerLink]="['/comandos']"  class="nav-link ">
				<i class="link-icon" data-feather="clipboard"></i><span class="link-title">Comandos</span>
			</a>
		</li>

        </ul>
      </div>
</nav>

		<!-- partial -->

<div class="page-wrapper">

  <!-- partial:partials/_navbar.php -->
  <nav class="navbar">
    <a  class="sidebar-toggler">
      <i data-feather="menu"></i>
    </a>
    <div class="navbar-content">
      <!--<form class="search-form">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i data-feather="search"></i>
            </div>
          </div>
          <input type="text" class="form-control" id="navbarForm" placeholder="Busca aquí...">
        </div>
      </form>-->
      <ul class="navbar-nav">

        <li class="nav-item dropdown nav-profile">
          <a class="nav-link dropdown-toggle"  id="profileDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img src="../../../../assets/images/logoPerfil.png" alt="userr">
          </a>
          <div class="dropdown-menu" aria-labelledby="profileDropdown">
            <div class="dropdown-header d-flex flex-column align-items-center">
              <div class="figure mb-3">
                <img src="../../../../../assets/images/logoPerfil.png" alt="">
              </div>
              <div class="info text-center" id="infoUsuario">

              </div>
            </div>
            <div class="dropdown-body">
              <ul class="profile-nav p-0 pt-3">
                <li class="nav-item">
                  <a [routerLink]="['/index']" class="nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    <span>Perfil</span>
                  </a>
                </li>


                <li class="nav-item">
                  <button  onclick='logout()' class="nav-link btn btn-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    <span>Cerrar sesión</span>
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </li>

      </ul>

<div>

</div>
    </div>

  </nav>
  <!-- partial -->

  <div class="page-content">

    <div class='row'>
      <div class='col-12 text-center'>
        <h3 id='tituloComando' class='p-1'>Configuración del flujo de trabajo</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body border border-secondary rounded">
            <div class="table-responsive" id='tablaComandos'>
              <table id="dataTableExample" class="table">
                <div style="display: inline-flex;">
                  <div #condiciones style="border-right: 1px solid;width: 15rem">
                    <div  >
                      <h4 style="margin-bottom: 1rem;">Condiciones</h4>

                      <div style="margin-bottom: 1rem; margin-top: 1rem" *ngFor="let condition of this.step[this.column][this.row].conditions; let i = index">
                        <input  (change)="saveNameStepCondition(i)" id = "Condicion {{i}}" value = {{condition}} ngTrim=false type="text" placeholder="Escribe aquí la condición">
                        <div style="margin-top: 1rem ;">
                          <div *ngIf="step[column][row].conditionIndex[i].conditionName != undefined" class="flex-container">
                            <app-true></app-true>
                            <app-combo-box-steps  [id]="'true ' + i" (changed)="saveCondition(i,$event,undefined)" style="position: relative;top: -1px;margin-left: 1rem;" [data] = "availableSteps(step)"></app-combo-box-steps>
                          </div>
                        </div>
                      </div>
                      <button style="margin-bottom: 1rem;" onclick="newCondition()" class="button" type="button">Añadir Condición</button>
                        <h4 style="margin-bottom: 1rem;">Paso por defecto</h4>
                        <div class="flex-container" style="margin-bottom: 1rem;">
                          <app-default></app-default>
                          <app-combo-box-steps  [id]="'next Step'" (changed)="createNextStepWithOutConditions($event,undefined)" style="position: relative;margin-left: 1rem;" [data] = "availableSteps(step)"></app-combo-box-steps>
                        </div>
                        <div *ngIf="step[row]!=undefined" style="display: inline-grid;justify-content: start;">
                          <button style ="margin-top: 1rem;" mat-raised-button color="warn" onclick="onRoute(step[row][column]?.idBd)" class="button" type="button">Configurar '{{step[column][row].name}}'</button>
                          <!-- <div>
                            <label for="end" style="margin-right: 1rem;"> ¿Último paso?</label>
                            <input id="end" style="margin-top: 1rem;" type="checkbox">
                          </div> -->

                        </div>
                        <div *ngIf="step[row]!=undefined">
                          <i class="bi bi-trash"></i>
                          <button style ="margin-top: 1rem;" mat-raised-button color="warn" (click)="removeStep(column,row)" class="button" type="button">Borrar '{{step[column][row].name}}'</button>
                        </div>
                    </div>
                  </div>

                  <div id="main">
                    <ng-container ng-sidebar-content #viewContainer></ng-container>
                  </div>
                </div>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>


  <!-- partial:partials/_footer.php -->
  <footer class="footer d-flex flex-column flex-md-row align-items-center justify-content-between">
    <p class="text-muted text-center text-md-left">Copyright © 2020 <b>SREC Solutions</b>. Todos los derechos reservados.</p>
    <p class="text-muted text-center text-md-left mb-0 d-none d-md-block"></p>
  </footer>
  <!-- partial -->

</div>
</div>
